CREATE DATABASE employee_db;
USE employee_db;

CREATE TABLE employee (
    e_id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    address VARCHAR(50) NOT NULL,
    birthday DATE NOT NULL,
    position ENUM(
        'Trainee', 'Personnel', 'Analyst', 'Developer',
        'Project leader', 'Manager', 'CEO', 'Support'
    ) NOT NULL,
    department ENUM(
        'Frontend', 'Backend', 'QA',
        'Human Resources', 'Logistics', 'Research', 'Administration'
    ) NOT NULL
) ENGINE=InnoDB;

CREATE TABLE account (
    a_id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    e_id INT NOT NULL UNIQUE,
    username VARCHAR(100) UNIQUE NOT NULL,
    password VARCHAR(255) NOT NULL,
    role ENUM('Admin', 'User') NOT NULL,

    CONSTRAINT fk_account_employee
        FOREIGN KEY (e_id)
        REFERENCES employee(e_id)
        ON DELETE CASCADE
) ENGINE=InnoDB;

CREATE INDEX idx_account_eid ON account(e_id);

INSERT INTO employee (
    name,
    address,
    birthday,
    position,
    department
) VALUES (
    'System Administrator',
    'Head Office',
    '1995-01-01',
    'Manager',
    'Administration'
);

INSERT INTO account (
    e_id,
    username,
    password,
    role
) VALUES (
    1,
    'admin',
    '$2y$10$NKL6oi6k29V029ZMb5.H3eSY//ZfST/aiLe75gFZiOyF883Tjx1Hy',
    'Admin'
);